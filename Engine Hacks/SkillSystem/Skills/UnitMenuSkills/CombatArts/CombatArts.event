//designate a new menu; will be a submenu of the unit menu
//menu command for calling the new menu
//usability on this is check a loop of all usabilities on the submenu
//if any return true, then this also does
//effect just calls the submenu
//submenu should exit back out to the unit menu
//existing systems work for skills that are actually combat arts

#include "CombatArts.lyn.event"
#include "CombatArtsDurabilityCost.lyn.event"

#define SetCombatArtCost(attackTypeID,durabilityCost) "PUSH; ORG (CombatArtCostTable+attackTypeID); BYTE durabilityCost; POP"

ALIGN 4
CombatArtCostTable:
ORG currentOffset+256

ALIGN 4
CombatArtsMenuDef:
BYTE 1 //x coord
BYTE 3 //y coord
BYTE 9 //width
BYTE 0 //height
WORD 0 //Unknown
POIN CombatArtsMenu //menu commands ptr
WORD 0 //OnInit
WORD 0 //OnEnd
WORD 0 //Unknown
POIN 0x22861 //On B Press
POIN 0x4f521 //On R Press
POIN 0x4f459 //On Help Box

SetCombatArtCost(0,0) //Attack
SetCombatArtCost(1,0) //Rescue
SetCombatArtCost(2,0) //Pair Up
SetCombatArtCost(3,2) //Lunge
SetCombatArtCost(4,2) //Mercy
SetCombatArtCost(5,2) //Gamble

ALIGN 4
CombatArtsMenu:
//Lunge
MenuCommand(UM_Lunge, UM_LungeDesc, NormalText, LungeUsability, LungeEffect, $22c31, $22c99)

//Mercy
MenuCommand(UM_Mercy, UM_MercyDesc, NormalText, MercyUsability, MercyEffect, $22c31, $22c99)

//Gamble
MenuCommand(UM_Gamble, UM_GambleDesc, NormalText, GambleUsability, GambleEffect, $22c31, $22c99)

//Capture
MenuCommand(UM_Capture, UM_CaptureDesc, NormalText, Capture_Usability, Capture_Effect_Func, $22c31, $22c99)

#ifdef SEMITRANSPARENCY_CHANGES
  MenuCommand(UM_Rally, UM_RallyDesc, NormalText, RallyCommandUsability, RallyCommandEffect)
#else
  MenuCommand(UM_Rally, UM_RallyDesc, NormalText, RallyCommandUsability, RallyCommandEffect, RallyCommandSwitchIn, RallyCommandSwitchOut)
#endif

// Shove & cie
MenuCommand(UM_Shove,      UM_ShoveDesc,      NormalText, prShoveCommand_Usability,      prShoveCommand_Effect)
MenuCommand(UM_Smite,      UM_SmiteDesc,      NormalText, prSmiteCommand_Usability,      prSmiteCommand_Effect)
MenuCommand(UM_Pivot,      UM_PivotDesc,      NormalText, prPivotCommand_Usability,      prPivotCommand_Effect)
MenuCommand(UM_Reposition, UM_RepositionDesc, NormalText, prRepositionCommand_Usability, prRepositionCommand_Effect)
MenuCommand(UM_Swap,       UM_SwapDesc,       NormalText, prSwapCommand_Usability,       prSwapCommand_Effect)


UM_Separator 

MESSAGE Proc_CombatArtCost